Blending Engine
=================

This application is a simple Blending Engine consisting a data structure that describes the price/rate of a currency from defined set of currencies offered by a contributors(brokers). It implements two different blending strategies (calculation of average and latest) and reflects the currency-based average and latest rates to potential users.
It is built on **Actor model** by **Akka Typed Persistence** showcasing the principles of **Event Sourcing**.

For simplicity, no authentication is implemented for contributors(brokers) and for their offers and those IDs
are generated by random UUID. In a real world application, these IDs would be verified and validated against a database.

<span id="anchor"></span>Requirements and Dependencies
-------------------------------------

This sample requires *sbt* and *Scala(>2.13.8)*.

The application utilize these dependencies :

- Akka Persistence Typed
- Akka Serialization Jackson
- LevelDB JNI
- Logback Classic


<span id="anchor"></span>Entities and Structure
-------------------------------------
-   Contributor (id: UUID, name: String)
-   Currency- Enum
-   Offer (id: UUID, contributor: Contributor, rate: BigDecimal, currency: Currency, isBuying: Boolean, date: LocalDateTime)

On every calculation state returns:
Tuple3[LazyList[Offer], Currency, BigDecimal, BigDecimal]


<span id="anchor-1"></span>Running the application
--------------------------------------------------

To run the application execute the following command or just run through the Main class in IDE :

``sbt run``



Using the application
---------------------

The collection of offers input is created manually in main class. For more advanced usage, there needs to be an input from external source to be emitted.
-   To test the application simply send these commands (these commands are already in the main class):


**system ! AddOffer(listOfOffers)**

**system ! GetStateByCurrencyAndOperationType(Currency.EUR, isBuying = false)**

-   And resulting log should be :

``average rate for the currency : EUR is 1.695 and latest rate is 1.72 if it is false for buying``

